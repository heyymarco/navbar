"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const element_1=__importDefault(require("@heymarco/element")),control_1=__importDefault(require("@heymarco/control"));class Navbar extends control_1.default{constructor(selector){super(selector)}get toggler(){return this.find(".toggler input[type=checkbox], input[type=checkbox].toggler")}get markSticky(){return this.is(".sticky")}set markSticky(sticky){this.toggleClass("sticky",sticky)}get expanded(){return this.toggler.is(":checked")}set expanded(expanded){this.toggler.filter(expanded?":not(:checked)":":checked").prop("checked",!!expanded).trigger("change")}get markExpand(){return this.is(".expand")}set markExpand(expand){this.toggleClass("expand",expand)}get markCollapse(){return this.is(".collapse")}set markCollapse(collapse){this.toggleClass("collapse",collapse)}static togglerChangeHandler(event){const toggler=new element_1.default(event.target),navbar=new Navbar(toggler.parents(this.class).first()),expanded=toggler.is(":checked");navbar.markExpand=expanded,navbar.markCollapse=!expanded}static overlayClickHandler(event){const overlay=new element_1.default(event.target),offset=overlay.offset(),mouseX=event.pageX-offset.left,mouseY=event.pageY-offset.top;if(mouseX<0||mouseX>overlay[0].offsetWidth&&mouseY<0||mouseY>overlay[0].offsetHeight){const navbar=overlay.parents(this.class).first();new Navbar(navbar).expanded=!1}}static windowScrollHandler(){element_1.default.window.scrollTop()>=30?!0!==this.navbarMinSet&&(this.navbarMinSet=!0,new Navbar(this.class).markSticky=!0):!1!==this.navbarMinSet&&(this.navbarMinSet=!1,new Navbar(this.class).markSticky=!1)}static windowResizeHandler(){new Navbar(new element_1.default(this.class).filter(".collapse")).markCollapse=!1}static get class(){return this._class}static set class(name){this._class!=name&&(""!=this._class&&element_1.default.document.off("change",`${this.class} .toggler input[type=checkbox], ${this.class} input[type=checkbox].toggler`,this._togglerChangeHandler).off("click",`${this.class} .links`,this._overlayClickHandler),this._class=name,this._varPrefix=(name||"").replace(".",""),""!=this._class&&element_1.default.document.on("change",`${this.class} .toggler input[type=checkbox], ${this.class} input[type=checkbox].toggler`,this._togglerChangeHandler).on("click",`${this.class} .links`,this._overlayClickHandler))}static get varPrefix(){return this._varPrefix}}exports.default=Navbar,Navbar.navbarMinSet=null,Navbar._class="",Navbar._varPrefix="",Navbar._togglerChangeHandler=(event=>Navbar.togglerChangeHandler(event)),Navbar._overlayClickHandler=(event=>Navbar.overlayClickHandler(event)),element_1.default.window.on("scroll",()=>Navbar.windowScrollHandler()).on("resize",()=>Navbar.windowResizeHandler()),Navbar.class=".navbar";
