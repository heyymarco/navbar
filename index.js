"use strict";var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{default:mod}};Object.defineProperty(exports,"__esModule",{value:!0});const element_1=__importDefault(require("@heymarco/element")),control_1=__importDefault(require("@heymarco/control")),element_config_1=__importDefault(require("@heymarco/element-config"));class Navbar extends control_1.default{constructor(selector=Navbar.config.class){super(selector)}get toggler(){return this.find(".toggler input[type=checkbox], input[type=checkbox].toggler")}get markSticky(){return this.is(".sticky")}set markSticky(sticky){this.toggleClass("sticky",sticky)}get expanded(){return this.toggler.is(":checked")}set expanded(expanded){this.toggler.filter(expanded?":not(:checked)":":checked").prop("checked",!!expanded).trigger("change")}get markExpand(){return this.is(".expand")}set markExpand(expand){this.toggleClass("expand",expand)}get markCollapse(){return this.is(".collapse")}set markCollapse(collapse){this.toggleClass("collapse",collapse)}static togglerChangeHandler(event){const toggler=new element_1.default(event.target),navbar=new Navbar(toggler.parents(Navbar.config.class).first()),expanded=toggler.is(":checked");navbar.markExpand=expanded,navbar.markCollapse=!expanded}static menuClickHandler(event){const menu=new element_1.default(event.target),offset=menu.offset(),mouseX=event.pageX-offset.left,mouseY=event.pageY-offset.top;(mouseX<0||mouseX>menu[0].offsetWidth&&mouseY<0||mouseY>menu[0].offsetHeight)&&this.overlayClickHandler(event)}static overlayClickHandler(event){const menuOverlay=new element_1.default(event.target);new Navbar(menuOverlay.parents(Navbar.config.class).first()).expanded=!1}static windowScrollHandler(){element_1.default.window.scrollTop()>=30?!0!==this._navbarMinSet&&(this._navbarMinSet=!0,(new Navbar).markSticky=!0):!1!==this._navbarMinSet&&(this._navbarMinSet=!1,(new Navbar).markSticky=!1)}static windowResizeHandler(){new Navbar(new element_1.default(Navbar.config.class).filter(".collapse")).markCollapse=!1}static startup(){element_1.default.window.on("scroll",()=>Navbar.windowScrollHandler()).on("resize",()=>Navbar.windowResizeHandler())}}exports.default=Navbar,Navbar._navbarMinSet=null,Navbar._togglerChangeHandler=(event=>Navbar.togglerChangeHandler(event)),Navbar._menuClickHandler=(event=>Navbar.menuClickHandler(event)),Navbar.config=new element_config_1.default(".navbar","navbar",()=>{element_1.default.document.off("change",`${Navbar.config.class} .toggler input[type=checkbox], ${Navbar.config.class} input[type=checkbox].toggler`,Navbar._togglerChangeHandler).off("click",`${Navbar.config.class} .menu`,Navbar._menuClickHandler)},()=>{element_1.default.document.on("change",`${Navbar.config.class} .toggler input[type=checkbox], ${Navbar.config.class} input[type=checkbox].toggler`,Navbar._togglerChangeHandler).on("click",`${Navbar.config.class} .menu`,Navbar._menuClickHandler)},!0),element_1.default.startup(Navbar.startup);
